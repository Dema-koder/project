{% extends 'core/base.html' %}

{% block title %}–í—Å–µ –±–ª—é–¥–∞ - –ü—Ä–∞–∑–¥–Ω–∏—á–Ω–æ–µ –º–µ–Ω—é{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-12">
        <div class="card mb-4">
            <div class="card-header bg-info text-white">
                <h3>üçΩÔ∏è –í—Å–µ –±–ª—é–¥–∞ –≤ –±–∞–∑–µ</h3>
                <p class="mb-0">–í—ã–±–µ—Ä–∏—Ç–µ –ª—é–±–∏–º—ã–µ –±–ª—é–¥–∞ –¥–ª—è –≤–∞—à–∏—Ö –≥–æ—Å—Ç–µ–π</p>
            </div>
            <div class="card-body">
                <div class="row">
                    {% for dish in dishes %}
                    <div class="col-md-4 mb-4">
                        <div class="card h-100 dish-card">
                            <div class="card-body">
                                <h5 class="card-title">{{ dish.name }}</h5>
                                <p class="card-text">
                                    <span class="badge bg-secondary">
                                        {{ dish.dish_type.name|default:"–†–∞–∑–Ω–æ–µ" }}
                                    </span>
                                    <span class="badge bg-warning text-dark ms-1">
                                        ‚è±Ô∏è {{ dish.cooking_time }} –º–∏–Ω
                                    </span>
                                </p>
                                <p class="card-text text-muted small">
                                    {{ dish.description|truncatechars:100 }}
                                </p>
                                <div class="mt-2">
                                    <span class="badge bg-light text-dark border">
                                        –°–ª–æ–∂–Ω–æ—Å—Ç—å: {{ dish.get_difficulty_display }}
                                    </span>
                                    <span class="badge bg-light text-dark border ms-1">
                                        –ü–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å: {{ dish.popularity_score }}
                                    </span>
                                </div>
                            </div>
                            <div class="card-footer bg-transparent">
                                <a href="#" class="btn btn-sm btn-outline-primary">
                                    –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                                </a>
                                <button class="btn btn-sm btn-outline-success float-end">
                                    ‚ù§Ô∏è –í—ã–±—Ä–∞—Ç—å
                                </button>
                            </div>
                        </div>
                    </div>

                    {% empty %}
                    <div class="col-12 text-center py-5">
                        <h4>üòî –ë–ª—é–¥ –ø–æ–∫–∞ –Ω–µ—Ç –≤ –±–∞–∑–µ</h4>
                        <p>–î–æ–±–∞–≤—å—Ç–µ –±–ª—é–¥–∞ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É –∏–ª–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ</p>
                        <a href="/admin/core/dish/add/" class="btn btn-primary">
                            ‚ûï –î–æ–±–∞–≤–∏—Ç—å –±–ª—é–¥–æ
                        </a>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h4>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h4>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-3 text-center">
                        <h5>{{ dishes.count }}</h5>
                        <p class="text-muted">–í—Å–µ–≥–æ –±–ª—é–¥</p>
                    </div>
                    <div class="col-md-3 text-center">
                        <h5>{{ dish_types_count }}</h5>
                        <p class="text-muted">–¢–∏–ø–æ–≤ –±–ª—é–¥</p>
                    </div>
                    <div class="col-md-3 text-center">
                        <h5>{{ avg_cooking_time|floatformat:0 }}</h5>
                        <p class="text-muted">–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è (–º–∏–Ω)</p>
                    </div>
                    <div class="col-md-3 text-center">
                        <h5>{{ easy_dishes }}</h5>
                        <p class="text-muted">–ü—Ä–æ—Å—Ç—ã—Ö –±–ª—é–¥</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
{% block extra_js %}
<script>
    // –ü—Ä–æ—Å—Ç–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
    document.addEventListener('DOMContentLoaded', function() {
        const dishCards = document.querySelectorAll('.dish-card');
        dishCards.forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-5px)';
                this.style.transition = 'transform 0.2s';
            });
            card.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
            });
        });
    });
</script>
{% endblock %}